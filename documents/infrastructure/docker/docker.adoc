
= Infrastructure : Docker

== Container handling

List containers :
----
docker container ls
----

Stop container :

----
docker container stop <container>
----

Start container :

----
docker run -p <hostport>:<containerport> --net=<networkname> <container>
----

Example :

----
docker run -p 8080:8080 --net=pearlbaynet pearlbay/stockairepo
----
----
docker run -e "TZ=EUROPE/BERLIN" -p 8080:8080 --net=pearlbaynet pearlbay/stockairepo
----
----
docker run -p 8089:8080 -p 1521:1521 -d madhead/docker-oracle-xe
----

Inspect container :
----
docker inspect <container>
----

== Image handling :

Create image :

----
docker build -t <tagname>:latest .
----

Example :
----
docker build -t pearlbay/stockairepo:latest .
----
Example (local minikube deployment, see notes below) :
----
docker build -t pearlbay/stockairepo_minikube:latest .
----
List images :
----
docker images
----

Remove image examples :
----
docker rmi <image>
----
----
docker rmi <repository_name>:tag
----


Remove all images :
----
docker rmi prune
----



== Network

Create network :
----
docker network create <name>
----

Inspect network :
----
docker network inspect <name>
----

Inspect network example :
----
docker network inspect pealbaynet
----

== Troubleshooting
- for local minikube environment, build the image with minikube docker daemon
- container have to be in the same network to be able to communicate
- see docker network inspect command for ip configuration
- for oracle db client to work the timezone environment has to be set in container

